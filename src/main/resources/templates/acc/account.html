<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{common/layouts/default}">
<!-- ============================================
  - 작성자   : 김희정
  - 최초작성 : 2025-06-18
  - 설명     : 계정과목관리 화면
  -----------------------------------------------
  [ 변경 이력 ]
  - 2025-06-18 (김희정): title 및 내용 추가, ag-grid 적용
  - 2025-06-18 (김희정): ag-grid 입력 테스트
  - 2025-06-19 (김희정): 계정과목 전체 조회 API 연동, ag-grid 연동
============================================ -->

<head>
  <title>계정과목관리</title>
</head>
<div layout:fragment="content">
  <div class="w-100" id="account">
    <div class="d-flex justify-content-between align-items-center mb-1">
      <h3>계정과목관리</h3>
    </div>
    <div class="row mb-3">
      <div class="col-md-12">
        <div class="radio-group">
          <input type="radio" class="btn-check" name="accountFilter" id="all" autocomplete="off" checked>
          <label class="btn btn-outline-secondary btn-sm me-1" for="all">전체</label>

          <input type="radio" class="btn-check" name="accountFilter" id="asset" autocomplete="off">
          <label class="btn btn-outline-secondary btn-sm me-1" for="asset">자산</label>

          <input type="radio" class="btn-check" name="accountFilter" id="liability" autocomplete="off">
          <label class="btn btn-outline-secondary btn-sm me-1" for="liability">부채</label>

          <input type="radio" class="btn-check" name="accountFilter" id="capital" autocomplete="off">
          <label class="btn btn-outline-secondary btn-sm me-1" for="capital">자본</label>

          <input type="radio" class="btn-check" name="accountFilter" id="income" autocomplete="off">
          <label class="btn btn-outline-secondary btn-sm me-1" for="income">수익</label>

          <input type="radio" class="btn-check" name="accountFilter" id="cost" autocomplete="off">
          <label class="btn btn-outline-secondary btn-sm" for="cost">비용</label>
        </div>
      </div>
    </div>

    <div class="table-responsive">


      <button onclick="showAlert()">알림창 띄우기</button>

      <div class="my-3">
        <div id="accountGrid" class="ag-theme-alpine" style="width:100%; height:400px;"></div>
      </div>
    </div>
  </div>
  <script th:inline="javascript">
    // 전체조회 API
    let accountList = /*[[${accountList}]]*/ [];

    // ag-Grid 세팅
    const gridOptions = {
      theme: 'legacy',
      // 그리드 values 배열
      rowData: accountList,
      // 그리드 필드명 정의
      columnDefs: [
        { headerName: "코드", field: "account_code", editable: true },
        { headerName: "계정과목명", field: "account_name", editable: true },
        { headerName: "구분", field: "account_type", editable: true },
        { headerName: "표준계정과목명", field: "standard_account_name", editable: true },
        { headerName: "표준영문명", field: "standard_english_name", editable: true },
        { headerName: "대분류", field: "major_category", editable: true },
        { headerName: "중분류", field: "middle_category", editable: true },
        { headerName: "소분류", field: "minor_category", editable: true },
        { headerName: "사용", field: "use_flag", editable: true },
      ],
      rowSelection: {
        mode: 'multiRow',
        // checkboxes: true,
        // enableClickSelection: true,
      },    
    };
    // 그리드 생성
    agGrid.createGrid(document.querySelector("#accountGrid"), gridOptions);

    function showAlert() {
      Swal.fire({
        title: '성공!',
        text: '작업이 성공적으로 완료되었습니다.',
        icon: 'success',
        confirmButtonText: '확인'
      });
    }
  </script>
</div>